<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Light theme (premium pastel) */
      --bg:#f7f8ff;
      --bg2:#fff6fb;
      --ink:#1d2233;
      --muted:#5b6278;

      --card: rgba(255,255,255,.82);
      --stroke: rgba(25,35,60,.10);
      --shadow: 0 18px 50px rgba(18, 26, 55, .14);

      --pink:#ff4fb0;
      --violet:#7c5cff;
      --mint:#19d3a2;
      --sky:#61b8ff;
      --amber:#ffb14a;

      --r: 26px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Prompt",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 600px at 15% 10%, rgba(124,92,255,.18), transparent 60%),
        radial-gradient(900px 600px at 85% 15%, rgba(255,79,176,.18), transparent 62%),
        radial-gradient(900px 650px at 50% 100%, rgba(25,211,162,.14), transparent 62%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow:hidden;
    }

    /* subtle grain */
    .grain{
      position:fixed; inset:0; pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.12'/%3E%3C/svg%3E");
      opacity:.20;
      mix-blend-mode:multiply;
    }

    /* floating elements (hearts) */
    .floaters{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:0; }
    .floater{
      position:absolute;
      font-size:18px;
      opacity:.85;
      filter: drop-shadow(0 10px 12px rgba(18, 26, 55, .18));
      animation: rise linear forwards;
      user-select:none;
    }
    @keyframes rise{
      from{ transform: translateY(20px) scale(.95); opacity:0; }
      15%{ opacity:.85; }
      to{ transform: translateY(-120vh) scale(1.25) rotate(12deg); opacity:0; }
    }

    .wrap{ min-height:100%; display:grid; place-items:center; padding:22px; }

    .card{
      width:min(720px, 100%);
      border-radius:var(--r);
      background: var(--card);
      border:1px solid var(--stroke);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      padding: 22px;
      z-index:1;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    .shine{
      position:absolute; inset:-120px;
      background:
        radial-gradient(520px 260px at 10% 10%, rgba(255,79,176,.18), transparent 60%),
        radial-gradient(560px 300px at 90% 10%, rgba(124,92,255,.16), transparent 62%),
        radial-gradient(560px 330px at 50% 110%, rgba(25,211,162,.14), transparent 62%);
      filter: blur(14px);
      pointer-events:none;
    }

    .top{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      position:relative; z-index:1;
    }

    .brand{
      display:flex; align-items:center; gap:12px;
      min-width:0;
    }

    .logo{
      width:42px; height:42px;
      border-radius:14px;
      background: linear-gradient(135deg, rgba(255,79,176,.22), rgba(124,92,255,.20));
      border: 1px solid rgba(124,92,255,.18);
      display:grid; place-items:center;
      box-shadow: 0 10px 26px rgba(124,92,255,.16);
      flex:0 0 auto;
    }
    .logo span{ font-size:20px; }

    .badge{
      display:inline-flex; align-items:center; gap:10px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.70);
      border:1px solid var(--stroke);
      color: var(--muted);
      font-size: 13px;
      white-space:nowrap;
      box-shadow: 0 10px 22px rgba(18,26,55,.10);
    }
    .dot{
      width:9px; height:9px; border-radius:50%;
      background: linear-gradient(135deg, var(--pink), var(--violet));
      box-shadow: 0 0 0 6px rgba(255,79,176,.10);
    }

    .chip{
      font-size:12px;
      color: rgba(91,98,120,.95);
      padding:7px 10px;
      border-radius:12px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.70);
      white-space:nowrap;
    }

    h1{
      margin: 14px 0 6px;
      font-size: 34px;
      line-height: 1.15;
      letter-spacing: .2px;
      position:relative; z-index:1;
    }

    .subtitle{
      margin:0 0 14px;
      color: rgba(91,98,120,.95);
      line-height: 1.75;
      font-size: 15.5px;
      position:relative; z-index:1;
    }

    .heroRow{
      display:flex;
      gap:14px;
      align-items:stretch;
      position:relative; z-index:1;
      margin-top: 10px;
      flex-wrap:wrap;
    }

    .panel{
      flex: 1 1 320px;
      border-radius: 20px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.75);
      padding: 14px;
      box-shadow: 0 12px 30px rgba(18,26,55,.08);
      position:relative;
      overflow:hidden;
    }

    .panel:before{
      content:"";
      position:absolute; inset:-80px;
      background: radial-gradient(420px 220px at 10% 10%, rgba(97,184,255,.18), transparent 55%),
                  radial-gradient(420px 220px at 90% 20%, rgba(255,177,74,.16), transparent 55%);
      filter: blur(18px);
      opacity:.9;
      pointer-events:none;
    }

    .typebox{
      border-radius: 18px;
      padding: 14px 14px;
      border: 1px solid rgba(25,35,60,.10);
      background: rgba(255,255,255,.70);
      position:relative;
      overflow:hidden;
    }
    .typebox small{
      display:block;
      color: rgba(91,98,120,.85);
      font-weight: 600;
      margin-bottom: 6px;
    }
    .type{
      display:inline;
      font-weight: 700;
      font-size: 16px;
      border-right: 2px solid rgba(29,34,51,.55);
      padding-right: 4px;
      animation: caret .9s step-end infinite;
    }
    @keyframes caret{ 50%{border-color:transparent} }

    .meter{
      margin-top: 12px;
      display:flex; align-items:center; gap:10px;
    }
    .meter label{
      font-size: 12.5px;
      color: rgba(91,98,120,.95);
      white-space:nowrap;
      font-weight: 600;
    }
    .bar{
      flex:1;
      height: 12px;
      border-radius: 999px;
      border: 1px solid rgba(25,35,60,.10);
      background: rgba(255,255,255,.75);
      overflow:hidden;
      position:relative;
    }
    .fill{
      height: 100%;
      width: 35%;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(255,79,176,.85), rgba(124,92,255,.85), rgba(25,211,162,.78));
      transition: width .35s ease;
    }
    .sheen{
      position:absolute; inset:0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.55), transparent);
      transform: translateX(-100%);
      animation: sheen 1.6s ease infinite;
      pointer-events:none;
      opacity:.6;
    }
    @keyframes sheen{ to{ transform: translateX(100%);} }

    .pct{
      font-size:12px;
      padding:7px 10px;
      border-radius: 12px;
      border: 1px solid rgba(25,35,60,.10);
      background: rgba(255,255,255,.75);
      color: rgba(91,98,120,.95);
      font-weight: 700;
    }

    /* button arena */
    .arena{
      flex: 1 1 320px;
      border-radius: 20px;
      border: 1px dashed rgba(25,35,60,.14);
      background: rgba(255,255,255,.55);
      position:relative;
      overflow:hidden;
      box-shadow: 0 12px 30px rgba(18,26,55,.08);
      min-height: 170px;
      padding: 12px;
    }
    .arena:before{
      content:"";
      position:absolute; inset:-120px;
      background: radial-gradient(520px 260px at 20% 10%, rgba(255,79,176,.18), transparent 60%),
                  radial-gradient(520px 260px at 85% 30%, rgba(124,92,255,.14), transparent 62%);
      filter: blur(18px);
      opacity:.8;
      pointer-events:none;
    }

    .btn{
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      appearance:none;
      border: 1px solid rgba(25,35,60,.12);
      border-radius: 18px;
      padding: 12px 16px;
      font-weight: 800;
      cursor:pointer;
      position:absolute;
      display:inline-flex;
      align-items:center;
      gap:10px;
      box-shadow: 0 12px 26px rgba(18,26,55,.14);
      transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;
      touch-action:none;
      z-index: 2;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }

    .btn-yes{
      left: 16px; top: 16px;
      color: #ffffff;
      border-color: rgba(255,79,176,.25);
      background: linear-gradient(135deg, rgba(255,79,176,.95), rgba(124,92,255,.92));
    }
    .btn-yes:hover{ filter: brightness(1.03); }

    .btn-no{
      right: 16px; bottom: 16px;
      color: rgba(29,34,51,.92);
      background: rgba(255,255,255,.82);
    }

    /* ‡∏Å‡∏ß‡∏ô‡πÜ: ‡∏™‡∏±‡πà‡∏ô‡∏ï‡∏≠‡∏ô‡∏´‡∏ô‡∏µ */
    .btn-no.wiggle{ animation: wiggle .28s ease; }
    @keyframes wiggle{
      0%{ transform: translate(0,0) rotate(0deg); }
      30%{ transform: translate(-2px,1px) rotate(-2deg); }
      60%{ transform: translate(2px,-1px) rotate(2deg); }
      100%{ transform: translate(0,0) rotate(0deg); }
    }

    /* tooltip ‡∏Å‡∏ß‡∏ô‡πÜ */
    .no-tip{
      position:absolute;
      padding: 8px 10px;
      font-size: 12px;
      border-radius: 12px;
      border: 1px solid rgba(25,35,60,.12);
      background: rgba(255,255,255,.88);
      color: rgba(29,34,51,.90);
      pointer-events:none;
      opacity:0;
      transform: translateY(6px);
      transition: .18s ease;
      white-space: nowrap;
      z-index: 3;
      box-shadow: 0 12px 26px rgba(18,26,55,.12);
    }
    .no-tip.show{ opacity:1; transform: translateY(0); }

    .miniRow{
      margin-top: 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      position:relative; z-index:1;
    }
    .ghost{
      flex: 1 1 240px;
      padding: 11px 12px;
      border-radius: 16px;
      border: 1px solid rgba(25,35,60,.10);
      background: rgba(255,255,255,.72);
      color: rgba(29,34,51,.90);
      font-weight: 800;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(18,26,55,.10);
      transition: transform .12s ease;
    }
    .ghost:hover{ transform: translateY(-1px); }

    .hint{
      margin-top: 12px;
      color: rgba(91,98,120,.92);
      font-size: 13px;
      line-height: 1.6;
      position:relative; z-index:1;
    }

    .footer{
      margin-top: 10px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      color: rgba(91,98,120,.88);
      font-size: 12px;
      position:relative; z-index:1;
    }

    /* modal */
    .overlay{
      position:fixed; inset:0;
      display:none; place-items:center;
      background: rgba(18, 26, 55, .35);
      padding: 18px;
      z-index: 10;
    }
    .overlay.show{ display:grid; }

    .modal{
      width: min(640px, 100%);
      border-radius: 24px;
      background: rgba(255,255,255,.90);
      border: 1px solid rgba(25,35,60,.12);
      box-shadow: 0 22px 60px rgba(18,26,55,.20);
      padding: 18px;
      position:relative;
      overflow:hidden;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    .modal:before{
      content:"";
      position:absolute; inset:-120px;
      background:
        radial-gradient(540px 280px at 10% 10%, rgba(255,79,176,.16), transparent 60%),
        radial-gradient(560px 300px at 90% 10%, rgba(124,92,255,.14), transparent 62%),
        radial-gradient(520px 320px at 50% 110%, rgba(25,211,162,.12), transparent 62%);
      filter: blur(18px);
      pointer-events:none;
      opacity:.9;
    }

    .modal .badge{
      background: rgba(255,255,255,.82);
    }
    .modal h2{
      margin: 8px 0 6px;
      font-size: 26px;
      position:relative; z-index:1;
    }
    .modal p{
      margin: 0 0 10px;
      color: rgba(91,98,120,.92);
      position:relative; z-index:1;
    }

    /* ===== GIF Slot (Local file) ===== */
    .gif-slot{
      margin: 10px 0 12px;
      display:flex;
      justify-content:center;
      align-items:center;
      position:relative; z-index:1;
    }
    .gif-img{
      width: min(260px, 72vw);
      height: auto;
      border-radius: 20px;
      border: 1px solid rgba(25,35,60,.12);
      background: rgba(255,255,255,.72);
      box-shadow: 0 14px 28px rgba(18,26,55,.16);
    }
    .gif-placeholder{
      width: min(380px, 90vw);
      padding: 14px 12px;
      text-align:center;
      border-radius: 20px;
      border: 1px dashed rgba(25,35,60,.18);
      background: rgba(255,255,255,.72);
      color: rgba(91,98,120,.92);
      font-size: 13px;
      line-height: 1.55;
    }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 10px;
      position:relative; z-index:1;
    }
    .pill{
      flex: 1 1 220px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(25,35,60,.10);
      background: rgba(255,255,255,.72);
      color: rgba(29,34,51,.88);
      font-size: 13px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      box-shadow: 0 10px 22px rgba(18,26,55,.10);
    }

    .close{
      margin-top: 12px;
      width: 100%;
      padding: 12px 14px;
      border-radius: 18px;
      border: 1px solid rgba(25,35,60,.12);
      background: linear-gradient(135deg, rgba(255,79,176,.16), rgba(124,92,255,.12));
      color: rgba(29,34,51,.92);
      font-weight: 900;
      cursor:pointer;
      box-shadow: 0 12px 26px rgba(18,26,55,.12);
      position:relative; z-index:1;
    }

    /* confetti */
    .confetti{ position:absolute; inset:0; pointer-events:none; overflow:hidden; opacity:.95; z-index:1; }
    .piece{
      position:absolute;
      top:-14px;
      width:10px; height:16px;
      border-radius:3px;
      transform: rotate(12deg);
      animation: fall 1.25s linear forwards;
    }
    @keyframes fall{ to{ transform: translateY(140%) rotate(260deg); opacity:1; } }

    /* responsive */
    @media (max-width:420px){
      h1{ font-size: 28px; }
      .subtitle{ font-size: 14.5px; }
      .arena{ min-height: 185px; }
      .logo{ width:40px; height:40px; border-radius:14px; }
    }
  </style>
</head>

<body>
  <div class="grain" aria-hidden="true"></div>
  <div class="floaters" id="floaters" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card" aria-label="Love proposal card">
      <div class="shine" aria-hidden="true"></div>

      <div class="top">
        <div class="brand">
          <div class="logo" aria-hidden="true"><span>üíå</span></div>
          <div class="badge"><span class="dot"></span> ‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡∏Å‡∏±‡πä‡∏ô‡∏ô‡∏ô‡∏ô</div>
        </div>
        <div class="chip" id="clock">‚Äî</div>
      </div>

      <h1>‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°</h1>
      <p class="subtitle">
        ‡∏û‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏µ‡∏ö‚Ä¶ ‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠ ‚Äú‡∏£‡∏π‡πâ‚Äù ‡∏ß‡πà‡∏≤‡∏û‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô
        ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ò‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ ‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏î‡∏π‡πÅ‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
      </p>

      <div class="heroRow">
        <div class="panel">
          <div class="typebox" role="status" aria-live="polite">
            <small>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏û‡∏µ‡πà</small>
            <span class="type" id="type"></span>
          </div>

          <div class="meter" aria-label="love meter">
            <label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à</label>
            <div class="bar">
              <div class="fill" id="fill"></div>
              <div class="sheen" aria-hidden="true"></div>
            </div>
            <div class="pct" id="pct">35%</div>
          </div>

          <div class="hint">
            
          </div>
        </div>

        <div class="arena" id="arena" aria-label="buttons area">
          <button class="btn btn-yes" id="yesBtn" type="button" aria-label="‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô">
            üíó ‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô
          </button>

          <button class="btn btn-no" id="noBtn" type="button" aria-label="‡πÑ‡∏°‡πà‡∏ï‡∏Å‡∏•‡∏á">
            üôÖ‚Äç‚ôÄÔ∏è ‡πÑ‡∏°‡πà‡∏ï‡∏Å‡∏•‡∏á
          </button>
        </div>
      </div>

      <div class="miniRow">
        <button class="ghost" id="copyBtn" type="button">Love youu Baby</button>
        <button class="ghost" id="burstBtn" type="button">‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏û‡∏¥‡πà‡∏° ‡∏õ‡∏¥‡πâ‡∏ß‡∏ß‡πÜ</button>
      </div>

      <div class="footer">
        <div>‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡πÄ‡∏ü‡∏ô‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏•‡∏∞‡∏°‡πâ‡∏≤‡∏á‡∏á‡∏á</div>
        <div id="netHint">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡πà‡∏á‡πÄ‡∏°‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
      </div>
    </section>
  </main>

  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-label="success dialog">
    <div class="modal">
      <div class="confetti" id="confetti" aria-hidden="true"></div>

      <div class="badge"><span class="dot"></span> ‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß</div>
      <h2>‡πÄ‡∏¢‡πâ! ‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡πä‡∏≤‡∏≤‡∏≤</h2>
      <p id="status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‚Ä¶</p>

      <!-- ====== GIF Slot (‡∏ß‡∏¥‡∏ò‡∏µ A: ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á) ====== -->
      <!-- ‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ä‡∏∑‡πà‡∏≠ sticker.gif ‡πÑ‡∏ß‡πâ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö index.html -->
      <div class="gif-slot" id="gifSlot" aria-label="sticker gif slot">
        <img id="gifImg" class="gif-img" src="sticker.gif" alt="sticker gif" />
      </div>

      <div class="row">
        <div class="pill" id="meta1"></div>
        <div class="pill" id="meta2"></div>
      </div>

      <button class="close" id="closeBtn" type="button">‡∏õ‡∏¥‡∏î</button>
    </div>
  </div>

  <script>
    // =======================
    // CONFIG
    // =======================
    const TO_EMAIL = "Apiwut.kw@gmail.com";
    const FORMSUBMIT_AJAX_ENDPOINT = `https://formsubmit.co/ajax/${encodeURIComponent(TO_EMAIL)}`;

    // =======================
    // Typewriter (first impression: ‡∏ô‡∏∏‡πà‡∏°, ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏à)
    // =======================
    const typeEl = document.getElementById("type");
    const lines = [
      "‡∏û‡∏µ‡πà‡∏£‡∏±‡∏Å‡∏´‡∏ô‡∏π‡∏°‡∏≤‡∏Å‡πÜ‡∏ô‡πä‡∏≤‡∏≤",
      "‡∏û‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏ô‡∏Ñ‡∏∏‡∏¢",
      "‡∏û‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô",
      "‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏ò‡∏≠‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏° :)"
    ];
    let li = 0, ci = 0;
    function typeLoop(){
      const t = lines[li];
      typeEl.textContent = t.slice(0, ci++);
      if (ci <= t.length) requestAnimationFrame(typeLoop);
      else {
        setTimeout(() => {
          li = (li + 1) % lines.length;
          ci = 0;
          setTimeout(typeLoop, 450);
        }, 900);
      }
    }
    typeLoop();

    // =======================
    // Clock
    // =======================
    const clock = document.getElementById("clock");
    function tick(){
      const d = new Date();
      clock.textContent = new Intl.DateTimeFormat("th-TH",{dateStyle:"medium",timeStyle:"short"}).format(d);
    }
    tick(); setInterval(tick, 1000);

    // =======================
    // Floating hearts / sparkles (‡πÄ‡∏ö‡∏≤‡πÜ ‡∏™‡∏ß‡∏¢)
    // =======================
    const floaters = document.getElementById("floaters");
    const floaterEmojis = ["üíó","üíñ","‚ú®","üå∑","üçì","ü´∂"];
    function spawnFloater(burst=false){
      const el = document.createElement("div");
      el.className = "floater";
      el.textContent = floaterEmojis[Math.floor(Math.random()*floaterEmojis.length)];
      el.style.left = (Math.random()*100) + "vw";
      el.style.bottom = (-10 + Math.random()*10) + "px";
      const dur = burst ? (3.0 + Math.random()*1.4) : (5.0 + Math.random()*2.8);
      el.style.animationDuration = dur + "s";
      el.style.fontSize = (16 + Math.random()*14) + "px";
      floaters.appendChild(el);
      setTimeout(()=>el.remove(), (dur*1000)+120);
    }
    setInterval(()=>spawnFloater(false), 760);
    document.getElementById("burstBtn").addEventListener("click", ()=>{
      for(let i=0;i<12;i++) setTimeout(()=>spawnFloater(true), i*35);
    });

    // =======================
    // Love meter (‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à)
    // =======================
    const fill = document.getElementById("fill");
    const pct = document.getElementById("pct");
    let love = 35;
    function setLove(v){
      love = Math.max(0, Math.min(100, v));
      fill.style.width = love + "%";
      pct.textContent = love + "%";
    }
    setLove(love);

    // =======================
    // No button (‡∏Å‡∏ß‡∏ô + ‡∏´‡∏•‡∏ö)
    // =======================
    const arena = document.getElementById("arena");
    const noBtn = document.getElementById("noBtn");

    const NO_TEXTS = [
      "üôÖ‚Äç‚ôÄÔ∏è ‡πÑ‡∏°‡πà‡∏ï‡∏Å‡∏•‡∏á",
      "‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏≠ üòè",
      "‡∏Å‡∏î‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏´‡∏£‡∏≠‡∏Å~",
      "‡πÄ‡∏≠‡πä‡∏∞ ‡∏°‡∏∑‡∏≠‡∏™‡∏±‡πà‡∏ô‡∏õ‡∏∞",
      "‡∏Ñ‡∏¥‡∏î‡∏î‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞ ü§≠",
      "‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ üòú",
      "‡∏Æ‡∏±‡πà‡∏ô‡πÅ‡∏ô‡πà ‡∏à‡∏∞‡∏Å‡∏î‡πÉ‡∏ä‡πà‡∏°‡∏±‡πâ‡∏¢",
      "‡∏´‡∏¢‡∏≠‡∏Å‡πÜ ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏´‡∏£‡∏≠‡∏Å",
      "‡∏ä‡πâ‡∏≤‡πÑ‡∏õ‡∏ô‡∏¥‡∏î~",
      "‡∏≠‡∏∏‡πä‡∏¢ ‡∏´‡∏•‡∏ö!"
    ];
    function randomNoText(){
      noBtn.textContent = NO_TEXTS[Math.floor(Math.random() * NO_TEXTS.length)];
    }

    // tooltip
    const tip = document.createElement("div");
    tip.className = "no-tip";
    tip.textContent = "‡∏Å‡∏î‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏´‡∏£‡∏≠‡∏Å~ üòù";
    arena.appendChild(tip);

    let tipTimer = null;
    function showTipNearButton(msg){
      tip.textContent = msg || "‡∏Å‡∏î‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏´‡∏£‡∏≠‡∏Å~ üòù";
      const a = arena.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const left = (b.left - a.left) + (b.width/2) - 70;
      const top  = (b.top - a.top) - 42;
      tip.style.left = `${Math.max(10, Math.min(a.width - 160, left))}px`;
      tip.style.top  = `${Math.max(10, top)}px`;
      tip.classList.add("show");
      clearTimeout(tipTimer);
      tipTimer = setTimeout(()=> tip.classList.remove("show"), 650);
    }

    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

    function afterNoEscapes(){
      randomNoText();
      noBtn.classList.remove("wiggle");
      void noBtn.offsetWidth; // retrigger
      noBtn.classList.add("wiggle");

      const tipMsgs = ["‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏≠‡πà‡∏∞ üòú", "‡∏Æ‡∏±‡πà‡∏ô‡πÅ‡∏ô‡πà!", "‡∏ä‡πâ‡∏≤‡πÑ‡∏õ‡∏ô‡∏¥‡∏î~", "‡πÄ‡∏≠‡πã? ‡∏à‡∏∞‡∏Å‡∏î‡∏à‡∏£‡∏¥‡∏á‡∏î‡∏¥", "‡∏ß‡πâ‡∏≤‡∏¢ ‡∏´‡∏•‡∏ö‡πÑ‡∏î‡πâ~"];
      showTipNearButton(tipMsgs[Math.floor(Math.random()*tipMsgs.length)]);

      setLove(Math.min(100, love + 3));
      spawnFloater(true);
    }

    function moveNoButton(px, py){
      const a = arena.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const pad = 10;
      const minX = pad, minY = pad;
      const maxX = a.width - b.width - pad;
      const maxY = a.height - b.height - pad;

      const pointerX = clamp(px - a.left, 0, a.width);
      const pointerY = clamp(py - a.top, 0, a.height);

      let best = {x: Math.random()*maxX, y: Math.random()*maxY, score:-1};
      for(let i=0;i<16;i++){
        const x = minX + Math.random()*(maxX - minX);
        const y = minY + Math.random()*(maxY - minY);
        const dx = (x + b.width/2) - pointerX;
        const dy = (y + b.height/2) - pointerY;
        const dist = Math.sqrt(dx*dx + dy*dy);
        if(dist > best.score) best = {x,y,score:dist};
      }

      noBtn.style.left = best.x + "px";
      noBtn.style.top  = best.y + "px";
      noBtn.style.right = "auto";
      noBtn.style.bottom = "auto";

      afterNoEscapes();
    }

    function evade(e){
      const p = (e.touches && e.touches[0]) ? e.touches[0] : e;
      moveNoButton(p.clientX, p.clientY);
    }

    noBtn.addEventListener("pointerenter", (e)=>{ randomNoText(); showTipNearButton("‡∏à‡∏∞‡∏Å‡∏î‡∏´‡∏£‡∏≠ üòè"); evade(e); });
    noBtn.addEventListener("pointerdown", (e)=>{ randomNoText(); showTipNearButton("‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏´‡∏£‡∏≠‡∏Å~"); evade(e); });
    noBtn.addEventListener("touchstart", (e)=>{ randomNoText(); showTipNearButton("‡∏à‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ~ üòù"); evade(e); }, {passive:false});

    arena.addEventListener("pointermove", (e)=>{
      const nb = noBtn.getBoundingClientRect();
      const dx = (nb.left + nb.width/2) - e.clientX;
      const dy = (nb.top + nb.height/2) - e.clientY;
      const dist = Math.sqrt(dx*dx + dy*dy);
      if(dist < 130) moveNoButton(e.clientX, e.clientY);
    });

    noBtn.addEventListener("click", (e)=>{ e.preventDefault(); showTipNearButton("‡∏ö‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡πà‡∏≤‡∏Å‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ üòú"); evade(e); });

    // =======================
    // Copy sweet text
    // =======================
    function timeTH(){
      return new Intl.DateTimeFormat("th-TH",{dateStyle:"full",timeStyle:"medium"}).format(new Date());
    }
    function buildEmailText(){
      return `‡∏ô‡πâ‡∏≠‡∏á‡∏ï‡∏≠‡∏ö‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡πÅ‡∏•‡πâ‡∏ß üíó

‡πÄ‡∏ß‡∏•‡∏≤: ${timeTH()}

‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏û‡∏µ‡πà:
‡∏û‡∏µ‡πà‡∏î‡∏µ‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡∏ô‡∏∞ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏û‡∏µ‡πà
‡∏û‡∏µ‡πà‡∏à‡∏∞‡∏î‡∏π‡πÅ‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î`;
    }

    const copyBtn = document.getElementById("copyBtn");
    copyBtn.addEventListener("click", async ()=>{
      try{
        await navigator.clipboard.writeText(buildEmailText());
        copyBtn.textContent = "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß";
        setTimeout(()=>copyBtn.textContent="‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô ‡πÜ", 1200);
      }catch{
        alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏•‡∏≠‡∏á‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏ó‡∏ô‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö");
      }
    });

    // =======================
    // Modal + confetti
    // =======================
    const overlay = document.getElementById("overlay");
    const statusEl = document.getElementById("status");
    const meta1 = document.getElementById("meta1");
    const meta2 = document.getElementById("meta2");
    const closeBtn = document.getElementById("closeBtn");
    const confetti = document.getElementById("confetti");
    const netHint = document.getElementById("netHint");

    function makeConfetti(){
      confetti.innerHTML = "";
      const colors = [
        "rgba(255,79,176,.95)",
        "rgba(124,92,255,.95)",
        "rgba(25,211,162,.95)",
        "rgba(97,184,255,.95)",
        "rgba(255,177,74,.95)"
      ];
      for(let i=0;i<30;i++){
        const el = document.createElement("div");
        el.className = "piece";
        el.style.left = (Math.random()*100) + "%";
        el.style.animationDelay = (Math.random()*0.25) + "s";
        el.style.background = colors[Math.floor(Math.random()*colors.length)];
        confetti.appendChild(el);
      }
    }

    function openModal(){ overlay.classList.add("show"); makeConfetti(); }
    function closeModal(){ overlay.classList.remove("show"); }
    closeBtn.addEventListener("click", closeModal);
    overlay.addEventListener("click", (e)=>{ if(e.target === overlay) closeModal(); });

    // =======================
    // ‡∏Å‡∏±‡∏ô‡∏£‡∏π‡∏õ GIF ‡πÅ‡∏ï‡∏Å ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ sticker.gif
    // =======================
    const gifImg = document.getElementById("gifImg");
    if (gifImg) {
      gifImg.addEventListener("error", () => {
        gifImg.style.display = "none";
        const slot = document.getElementById("gifSlot");
        if (slot) {
          const ph = document.createElement("div");
          ph.className = "gif-placeholder";
          ph.innerHTML = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå <b>sticker.gif</b><br>‡πÉ‡∏´‡πâ‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏ß‡πâ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö <b>index.html</b>';
          slot.appendChild(ph);
        }
      });
    }

    // =======================
    // ‡∏™‡πà‡∏á‡πÄ‡∏°‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (AJAX)
    // =======================
    async function sendEmailAuto(){
      const payload = {
        subject: "‡πÄ‡∏ò‡∏≠‡∏ï‡∏≠‡∏ö‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡πÅ‡∏•‡πâ‡∏ß üíó",
        message: buildEmailText(),
        _captcha: "false",
        _next: window.location.href
      };

      const res = await fetch(FORMSUBMIT_AJAX_ENDPOINT, {
        method: "POST",
        headers: { "Content-Type": "application/json", "Accept": "application/json" },
        body: JSON.stringify(payload)
      });

      if(!res.ok){
        const txt = await res.text().catch(()=> "");
        throw new Error(`HTTP ${res.status} ${txt}`);
      }
      return await res.json().catch(()=> ({}));
    }

    // =======================
    // YES button
    // =======================
    const yesBtn = document.getElementById("yesBtn");
    let sending = false;

    yesBtn.addEventListener("click", async ()=>{
      if(sending) return;
      sending = true;

      setLove(100);
      for(let i=0;i<14;i++) setTimeout(()=>spawnFloater(true), i*30);

      openModal();
      meta1.textContent = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤: " + timeTH();
      meta2.textContent = "‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á: " + TO_EMAIL;
      statusEl.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‚Ä¶";

      try{
        await sendEmailAuto();
        statusEl.textContent = "‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß üíó";
        netHint.textContent = "‡∏™‡πà‡∏á‡πÄ‡∏°‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß";
      }catch(err){
        console.warn(err);
        statusEl.textContent =
          "‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡∏≠‡∏≤‡∏à‡∏ï‡∏¥‡∏î‡πÄ‡∏ô‡πá‡∏ï/‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å) ‡∏•‡∏≠‡∏á‡∏Å‡∏î‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö";
        netHint.textContent = "‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà";
      }finally{
        sending = false;
      }
    });

    // =======================
    // Accessibility (Enter/Space)
    // =======================
    yesBtn.addEventListener("keydown", (e)=>{
      if(e.key === "Enter" || e.key === " "){
        e.preventDefault();
        yesBtn.click();
      }
    });
  </script>

  <!--
    ‡∏ß‡∏¥‡∏ò‡∏µ A (GIF ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á):
    1) ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ü‡∏•‡πå GIF ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ "sticker.gif"
    2) ‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö index.html
    3) ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà => GIF ‡∏à‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏°‡∏î‡∏≠‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
  -->
</body>
</html>
